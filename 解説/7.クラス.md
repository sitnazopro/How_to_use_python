# Pythonの応用：クラス (Class)

「クラス」は、**オブジェクト指向プログラミング (OOP)** の中心的な概念です。クラスを使うと、独自に定義した「モノ」の設計図を作ることができます。この設計図から作られた実体が「**オブジェクト**」です。

例えば、「車」というクラス（設計図）を定義し、そこから「私の車」「あなたの車」といった具体的なオブジェクト（実体）を作ることができます。

---

## 1. クラスの定義とオブジェクトの生成

クラスは `class` キーワードを使って定義します。

**構文:**
```python
class クラス名:
    # クラスの定義（属性やメソッド）
```

-   クラス名の最初の文字は、慣習的に大文字にします（例: `Car`, `Person`）。

クラスからオブジェクトを生成（インスタンス化）するには、`クラス名()` のように書きます。

**例:**
```python
# 「犬」の設計図となるクラスを定義
class Dog:
    pass  # passは、中身が何もないブロックを定義するときに使う

# Dogクラスからオブジェクトを生成
my_dog = Dog()
friend_dog = Dog()

# my_dogとfriend_dogは、それぞれ異なる「犬」オブジェクト
print(type(my_dog))  # => <class '__main__.Dog'>
```

---

## 2. 属性 (Attribute) と `__init__` メソッド

**属性**とは、オブジェクトが持つデータ（情報）のことです。「犬」クラスであれば、「名前」「犬種」「年齢」などが属性にあたります。

`__init__` メソッドは、オブジェクトが生成されるときに**自動的に呼び出される**特別なメソッド（初期化メソッド）です。この中で、オブジェクトの属性を定義するのが一般的です。

-   メソッドとは、クラス内に定義された関数のことです。
-   メソッドの最初の引数には、慣習的に `self` という名前を付けます。`self` は、生成されたオブジェクト自身を指します。

**例:**
```python
class Dog:
    # 初期化メソッド
    def __init__(self, name, breed):
        # 属性を設定
        self.name = name      # self.属性名 = 値
        self.breed = breed
        print(f"{self.name}が生まれました！")

# オブジェクトを生成するときに、__init__メソッドの引数(self以外)を渡す
my_dog = Dog("ポチ", "柴犬")
friend_dog = Dog("ハチ", "秋田犬")

# 属性にアクセスするには「オブジェクト.属性名」と書く
print(f"私の子の名前は{my_dog.name}です。")      # => 私の子の名前はポチです。
print(f"友達の子の犬種は{friend_dog.breed}です。") # => 友達の子の犬種は秋田犬です。
```

---

## 3. メソッド (Method)

**メソッド**とは、オブジェクトが持つことができる「振る舞い」や「操作」のことです。クラス内に `def` で定義します。

**例:**
```python
class Dog:
    def __init__(self, name, breed):
        self.name = name
        self.breed = breed

    # 「吠える」というメソッドを定義
    def bark(self):
        return f"{self.name}: ワンワン！"

    # 「自己紹介」するメソッドを定義
    def introduce(self):
        return f"ぼくの名前は{self.name}、犬種は{self.breed}だよ。"

# オブジェクトを生成
my_dog = Dog("ポチ", "柴犬")

# メソッドを呼び出すには「オブジェクト.メソッド名()」と書く
print(my_dog.bark())       # => ポチ: ワンワン！
print(my_dog.introduce())  # => ぼくの名前はポチ、犬種は柴犬だよ。
```

---

## なぜクラスを使うのか？

-   **関連性の高いデータと処理をまとめられる:**
    「犬」に関するデータ（名前、犬種）と処理（吠える、自己紹介する）を `Dog` クラスとして一箇所にまとめることで、プログラムの構造が整理され、分かりやすくなります。

-   **コードの再利用性が高まる:**
    一度クラスを定義すれば、そのクラスからたくさんのオブジェクトを簡単に作ることができます。

-   **大規模な開発に適している:**
    クラスを部品として組み合わせることで、複雑で大規模なプログラムを効率的に開発・管理することができます。

クラスは少し複雑に感じるかもしれませんが、Pythonで本格的なアプリケーションを開発するためには欠かせない、非常に強力な機能です。

---

## 4. クラスの継承 (Inheritance)

**継承**とは、既存のクラス（**親クラス**または**スーパークラス**）の機能を引き継いで、新しいクラス（**子クラス**または**サブクラス**）を作成する仕組みです。これにより、共通の機能を再利用しつつ、新しい機能を追加したり、一部の機能を変更（**オーバーライド**）したりできます。

**構文:**
```python
class 子クラス名(親クラス名):
    # 追加の属性やメソッド
```

### 継承の例

`Dog`クラスを親クラスとして、その機能を受け継いだ`GuideDog`（盲導犬）クラスを作ってみましょう。

```python
# 親クラス
class Dog:
    def __init__(self, name, breed):
        self.name = name
        self.breed = breed

    def bark(self):
        return f"{self.name}: ワンワン！"

    def introduce(self):
        return f"ぼくの名前は{self.name}、犬種は{self.breed}だよ。"

# Dogクラスを継承して子クラスを定義
class GuideDog(Dog):
    # GuideDog独自のメソッドを追加
    def lead(self):
        return f"{self.name}が安全に誘導します。"

# GuideDogオブジェクトを生成
g_dog = GuideDog("エル", "ラブラドール")

# 親クラス(Dog)の属性やメソッドがそのまま使える
print(f"名前: {g_dog.name}")  # => 名前: エル
print(g_dog.bark())         # => エル: ワンワン！
print(g_dog.introduce())    # => ぼくの名前はエル、犬種はラブラドールだよ。

# 子クラス(GuideDog)で追加したメソッドも使える
print(g_dog.lead())         # => エルが安全に誘導します。
```

### メソッドのオーバーライドと `super()`

子クラスで、親クラスと同じ名前のメソッドを定義すると、そのメソッドの動作を上書きできます。これを**オーバーライド (Override)** と言います。

さらに、子クラスのメソッド内から親クラスのメソッドを呼び出したい場合は `super()` を使います。これは、親クラスの機能は活かしつつ、子クラスで新しい機能を追加したい場合に便利です。

**例: `GuideDog`の`__init__`と`introduce`をオーバーライドする**

```python
class GuideDog(Dog):
    def __init__(self, name, breed, workplace):
        # super()を使って、親クラス(Dog)の__init__を呼び出す
        super().__init__(name, breed)
        # GuideDog独自の属性を追加
        self.workplace = workplace

    # introduceメソッドをオーバーライド(上書き)
    def introduce(self):
        # まずsuper()で親クラスのintroduceメソッドを呼び出す
        base_intro = super().introduce()
        # そこに新しい情報を付け加える
        return f"{base_intro} 勤務先は{self.workplace}です。"

# GuideDogオブジェクトを生成
g_dog = GuideDog("レオ", "ゴールデンレトリバー", "駅")

# オーバーライドしたメソッドが呼ばれる
print(g_dog.introduce())
# => ぼくの名前はレオ、犬種はゴールデンレトリバーだよ。 勤務先は駅です。
```
継承を使うことで、クラスの役割分担が明確になり、より整理された、拡張しやすいプログラムを作ることができます。
