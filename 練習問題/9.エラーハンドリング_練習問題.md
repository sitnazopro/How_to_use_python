# 練習問題：エラーハンドリング

このファイルでは、「9.エラーハンドリング.md」で学んだ `try...except` 構文を使って、エラーに強いプログラムを書く練習をします。

---

### 問題1：数値変換エラーの処理

1.  ユーザーに「好きな数字を入力してください」と尋ね、入力を受け取るプログラムがあります。
2.  `try...except` を使って、入力された文字列が整数に変換できない場合（`ValueError`）に、「エラー：有効な数値を入力してください。」と表示するようにしてください。
3.  入力が正しく整数に変換できた場合は、「入力ありがとうございます。」と `else` ブロックを使って表示してください。

---

### 問題2：辞書のキーエラー処理

1.  以下のプロフィール辞書があります。
    ```python
    profile = {"name": "Taro", "age": 25}
    ```
2.  この辞書から `profile["city"]` のように存在しないキーにアクセスしようとすると `KeyError` が発生します。
3.  `try...except KeyError` を使って、このエラーを捕捉し、「エラー：指定されたキーは見つかりませんでした。」と表示するプログラムを書いてください。

---

### 問題3：ファイルの読み込みと `finally`

1.  `try...except...finally` を使って、ファイルの読み込み処理を書いてみましょう。
2.  `try` ブロックで、`"data.txt"` という名前のファイルを読み込みモード (`"r"`) で開いて、その内容を表示しようと試みてください。
3.  `except FileNotFoundError` ブロックで、もしファイルが見つからなかった場合に「エラー：`data.txt` が見つかりません。」と表示してください。
4.  `finally` ブロックで、「処理を終了します。」と必ず表示されるようにしてください。
5.  `"data.txt"` というファイルが**ない**状態で実行した場合と、**空の "data.txt" を作成して**実行した場合で、それぞれ表示がどう変わるか確認してみましょう。


---

## 解答例

<details>
<summary>ここをクリックすると解答例が表示されます</summary>

### 問題1
```python
try:
    num_str = input("好きな数字を入力してください: ")
    num = int(num_str)
except ValueError:
    print("エラー：有効な数値を入力してください。")
else:
    print("入力ありがとうございます。")
```

### 問題2
```python
profile = {"name": "Taro", "age": 25}

try:
    city = profile["city"]
    print(f"都市: {city}")
except KeyError:
    print("エラー：指定されたキーは見つかりませんでした。")
```

### 問題3
```python
try:
    # with open(...) を使うと、ブロックを抜けるときに自動でファイルがクローズされるため安全です。
    with open("data.txt", "r", encoding="utf-8") as f:
        content = f.read()
        print("--- ファイルの内容 ---")
        print(content)
        print("--------------------")
except FileNotFoundError:
    print("エラー：`data.txt` が見つかりません。")
finally:
    print("処理を終了します。")

# 解答の補足:
# 9.エラーハンドリング.md の例では f.close() を finally で呼び出していましたが、
# 実際のファイル操作では `with open(...)` 構文を使うのが一般的です。
# この構文は、ブロックの最後で自動的に close() を呼び出してくれるため、
# closeの書き忘れがなくなり、より安全で推奨される方法です。
```

</details>
